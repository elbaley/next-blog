+++
title= "Javascript 30 - GÃ¼n 23"
description = "Javascript 30 Challenge Proje 23:Javascript ile yazÄ±yÄ± sese dÃ¶nÃ¼ÅŸtÃ¼rme"
date= "2023-05-20T02:41:33+03:00"
author = "Furkan"
favorite = false
tags = [

]
categories = [
"Javascript"
]

draft= false
+++
Projenin demosu : [Demo](https://elbaley.github.io/js-30/23/index-solution.html)

BaÅŸlangÄ±Ã§ dosyalarÄ±nÄ± bulabileceÄŸiniz repom: [js-30 | github](https://github.com/elbaley/js-30)

## AmaÃ§
BugÃ¼n Ã§oÄŸu modern tarayÄ±cÄ±da desteklenen [SpeechSynthesis](https://developer.mozilla.org/en-US/docs/Web/API/SpeechSynthesis) yardÄ±mÄ±yla yazÄ±yÄ± sese dÃ¶nÃ¼ÅŸtÃ¼receÄŸiz. 

## Ã‡Ã¶zÃ¼m
**HTML**:

```html
<div class="voiceinator">

  <h1>The Voiceinator 5000</h1>

  <select name="voice" id="voices">
    <option value="">Select A Voice</option>
  </select>

  <label for="rate">Rate:</label>
  <input name="rate" type="range" min="0" max="3" value="1" step="0.1">

  <label for="pitch">Pitch:</label>

  <input name="pitch" type="range" min="0" max="2" step="0.1">
  <textarea name="text">Merhaba! Javascript 23. gÃ¼nde SpeechSynthesisUtterance API kullanarak yazÄ±yÄ± sese Ã§eviriyoruz!
  </textarea>
  <button id="stop">Stop!</button>
  <button id="speak">Speak</button>

</div>
```

**Javascript**:
```html
<script>
const msg = new SpeechSynthesisUtterance();
let voices = [];
const voicesDropdown = document.querySelector('[name="voice"]');
const options = document.querySelectorAll('[type="range"], [name="text"]');
const speakButton = document.querySelector('#speak');
const stopButton = document.querySelector('#stop');
//varsayÄ±lan konuÅŸma metnini ve dilini belirleyelim
msg.text = document.querySelector('[name="text"]').value;
msg.lang = "tr-TR"

function populateVoices() {
  // eÄŸer tarayÄ±cÄ± speechSynthesis desteklemiyorsa fonksiyonu durduralÄ±m
  if (typeof speechSynthesis === 'undefined') {
    return
  }
  // iÅŸletim sistemine/ tarayÄ±cÄ±ya baÄŸlÄ± olarak deÄŸisen uygun sesler alÄ±nÄ±r
  voices = speechSynthesis.getVoices();
  // her bir seÃ§enek iÃ§in bir option elementi eklenir
  // debugger;
  voicesDropdown.innerHTML = voices
    .map(voice => `<option ${voice.lang === "tr-TR" ? "selected" : ""}  value="${voice.name}">${voice.lang} (${voice.name})</option>`)
    .join('');
}

function setVoice() {
  //sesi ve dili arrayde bulup gÃ¼ncelleyim
  msg.voice = voices.find(voice => voice.name === this.value);
  msg.lang = msg.voice.lang
  toggle();
}

function toggle(startOver = true) {
  speechSynthesis.cancel();
  if (startOver) {
    speechSynthesis.speak(msg);
  }
}

function setOption() {
  console.log(this.name, this.value);
  // option elementlerimiz :
  // 1)<input name="rate" type="range" min="0" max="3" value="1" step="0.1">
  // 2)<textarea name="text">Hello! I love JavaScript ğŸ‘</textarea>
  // Ã¶rneÄŸin birinci option deÄŸeri deÄŸiÅŸirse: this.name = 'rate' , this.value =1.5 
  // Ã¶rneÄŸin ikinci option deÄŸeri deÄŸiÅŸirse: this.name = 'text' , this.value ='yazÄ±' olur
  // bÃ¶ylece hem konuÅŸma hÄ±zÄ±nÄ± hem de konuÅŸulacak metni ayarlayabiliriz
  msg[this.name] = this.value;
  toggle();
}


//voiceschanged olayÄ± sistemde kullanÄ±labilir ses seÃ§enekleri gÃ¼ncellediÄŸinde tetiklenir
// safaride voiceschanged olayÄ± sayfa ilk yÃ¼klendiÄŸinde chrome'un aksine tetiklenmediÄŸi iÃ§in
// onvoiceschanged olayÄ±nÄ±n desteklenmediÄŸi durumda populateVoices fonksiyonunu manuel olarak Ã§aÄŸÄ±ralim
populateVoices()
if(speechSynthesis.onvoiceschanged !== undefined){
  speechSynthesis.onvoiceschanged = populateVoices
}
// Ses seÃ§imi deÄŸiÅŸtiÄŸinde seÃ§ilen ses gÃ¼ncellenir
voicesDropdown.addEventListener('change', setVoice);
options.forEach(option => option.addEventListener('change', setOption));
// speakButonuna tÄ±klandÄ±ÄŸÄ±nda konuÅŸma baÅŸlatÄ±lÄ±r
speakButton.addEventListener('click', toggle);
// stopButonuna tÄ±klandÄ±ÄŸÄ±nda konuÅŸma durdurulur
stopButton.addEventListener('click', () => toggle(false));
</script>
```
